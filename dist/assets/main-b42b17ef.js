(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();function y(){var e=new Date,t=e.getHours(),r=e.getMinutes(),a="AM";t==0&&(t=12),t>12&&(t=t-12,a="PM"),t=t<10?"0"+t:t,r=r<10?"0"+r:r;var o=t+":"+r+" "+a;document.getElementById("MyClockDisplay").innerText=o,document.getElementById("MyClockDisplay").textContent=o,setTimeout(y,1e3)}y();let i={apiKey:"b55fd78edf1679ca3a728c024f2b8e35",fetchWeather:function(e){fetch("https://api.openweathermap.org/data/2.5/weather?q="+e+"&units=metric&appid="+this.apiKey).then(t=>{if(!t.ok)throw alert("No weather found."),new Error("No weather found.");return t.json()}).then(t=>this.displayWeather(t))},displayWeather:function(e){const{name:t}=e,{icon:r,description:a}=e.weather[0],{temp:o,humidity:n}=e.main;e.wind,document.querySelector(".city").innerText=t,document.querySelector(".icon").src="https://openweathermap.org/img/wn/"+r+".png",document.querySelector(".description").innerText=a,document.querySelector(".temp").innerText=o,document.querySelector(".weather").classList.remove("loading")},search:function(){this.fetchWeather(document.querySelector(".search-bar").value)}};document.querySelector(".search button").addEventListener("click",function(){i.search()});document.querySelector(".search-bar").addEventListener("keyup",function(e){e.key=="Enter"&&i.search()});let p={reverseGeocode:function(e,t){var r="7390c6d32c044d6ea0ab2243be1b174e",a=e+","+t,o="https://api.opencagedata.com/geocode/v1/json",n=o+"?key="+r+"&q="+encodeURIComponent(a)+"&pretty=1&no_annotations=1",s=new XMLHttpRequest;s.open("GET",n,!0),s.onload=function(){if(s.status===200){var l=JSON.parse(s.responseText);i.fetchWeather(l.results[0].components.city)}else if(s.status<=500){console.log("unable to geocode! Response code: "+s.status);var l=JSON.parse(s.responseText);console.log("error msg: "+l.status.message)}else console.log("server error")},s.onerror=function(){console.log("unable to connect to server")},s.send()},getLocation:function(){function e(t){p.reverseGeocode(t.coords.latitude,t.coords.longitude)}navigator.geolocation?navigator.geolocation.getCurrentPosition(e,console.error):i.fetchWeather("New York")}};p.getLocation();const u=document.getElementById("bg-theme-input");localStorage.getItem("background")||localStorage.setItem("background","nordic");function v(e){const t=window.screen.height,r=window.screen.width;document.body.style.backgroundImage="url(https://source.unsplash.com/"+r+"x"+t+"/?"+e}v(localStorage.getItem("background"));u.addEventListener("change",()=>{localStorage.setItem("background",u.value),v(u.value)});const f=document.getElementById("settings-button"),w=document.querySelector(".settings-tray-section");f.addEventListener("click",()=>{f.classList.toggle("active"),w.classList.toggle("active")});const d=document.getElementById("global-theme"),m=document.getElementById("global-layout"),c=document.getElementById("widget-body"),g=document.querySelectorAll(".widget"),h=document.querySelector(".weather-app");document.getElementById("main-section");localStorage.getItem("theme")||(localStorage.setItem("theme","dark"),localStorage.setItem("layout","center"));if(localStorage.getItem("theme")=="light"){for(let e=0;e<5;e++)g[e].classList.add("widget-light");d.value="light"}localStorage.getItem("layout")=="left"&&(c.classList.remove("even-columns"),c.classList.add("main-section-left-layout"),h.classList.add("weather-app-left-layout"),m.value="left");d.addEventListener("change",()=>{if(d.value=="dark"){for(let e=0;e<5;e++)g[e].classList.remove("widget-light");localStorage.setItem("theme","dark")}else{for(let e=0;e<5;e++)g[e].classList.add("widget-light");localStorage.setItem("theme","light")}});m.addEventListener("change",()=>{m.value=="center"?(c.classList.add("even-columns"),c.classList.remove("main-section-left-layout"),h.classList.remove("weather-app-left-layout"),localStorage.setItem("layout","center")):(c.classList.remove("even-columns"),c.classList.add("main-section-left-layout"),h.classList.add("weather-app-left-layout"),localStorage.setItem("layout","left"))});
